<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Profil Commercial</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- Card for profile information -->
  <ion-card>
    <ion-card-header class="profile-header">
      <ion-avatar (click)="openModal()"> <!-- Clic sur la photo de profil pour ouvrir la modal -->
        <img [src]="commercial.photo" alt="Profile Photo">
      </ion-avatar>

      <!-- Modify photo button -->
      <ion-button fill="clear" (click)="changePhoto()">Modifier</ion-button>

      <!-- Profile Name and Email -->
      <h2>{{ commercial.nom }}</h2>
      <p>Email : {{ commercial.email }}</p>
    </ion-card-header>

    <!-- General information -->
    <ion-card-content>
      <ion-item>
        <ion-label position="stacked">Portefeuille</ion-label>
        <p>{{ commercial.portefeuille.length }} Points de Vente</p>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Objectifs</ion-label>
        <p>{{ commercial.objectifs }}</p>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <!-- Actions List -->
  <ion-list>
    <ion-item button [routerLink]="['/pointdevente']">
      <ion-icon slot="start" name="search-outline"></ion-icon>
      <ion-label>Prospecter un Point de Vente</ion-label>
    </ion-item>
    <ion-item button [routerLink]="['/visite']">
      <ion-icon slot="start" name="calendar-outline"></ion-icon>
      <ion-label>Planifier une Visite</ion-label>
    </ion-item>
    <ion-item button [routerLink]="['/objectif']">
      <ion-icon slot="start" name="stats-chart-outline"></ion-icon>
      <ion-label>Suivre les Objectifs</ion-label>
    </ion-item>
    <ion-item button (click)="validerVisites()">
      <ion-icon slot="start" name="checkmark-done-outline"></ion-icon>
      <ion-label>Valider les Visites</ion-label>
    </ion-item>
  </ion-list>

</ion-content>

<!-- Modal pour afficher l'image en grand format -->
<ion-modal [isOpen]="isModalOpen" (ionModalDidDismiss)="closeModal()">
  <ion-content>
    <ion-img [src]="commercial.photo" alt="Profile Image" class="modal-image"></ion-img>
  </ion-content>
</ion-modal>
